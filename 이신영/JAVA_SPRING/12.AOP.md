## AOP에 대해 설명해 주세요.

AOP는 Aspect Oriented Programming, 즉 관점 지향 프로그래밍을 의미합니다. 

AOP의 목표는 프로그램의 핵심 비즈니스 로직과 횡단 관심사(Cross-Cutting Concerns)를 분리하는 것입니다. 

횡단 관심사에는 로깅, 보안, 트랜잭션 관리 등이 포함됩니다. AOP를 통해 이러한 공통 기능을 별도의 모듈로 분리하여 코드의 중복을 줄이고, 핵심 비즈니스 로직을 보다 명확하게 유지할 수 있습니다. 

Spring AOP는 프록시 기반의 AOP 구현을 제공하며, 주로 @Aspect 어노테이션 스타일을 사용합니다.

### @Aspect는 어떻게 동작하나요?

@Aspect 어노테이션은 Spring AOP(Aspect-Oriented Programming)에서 특정 횡단 관심사를 모듈화하는 데 사용됩니다. 이를 통해 트랜잭션 관리, 로깅, 보안 등을 주요 비즈니스 로직과 분리할 수 있습니다.

먼저, @Aspect 어노테이션을 클래스에 붙여 해당 클래스가 Aspect임을 명시합니다. Aspect는 여러 개의 Advice와 Pointcut으로 구성됩니다. Advice는 특정 Join Point에서 실행될 코드를 정의합니다. Join Point는 프로그램 실행 중 특정 지점을 의미하며, 주요 Advice 유형에는 메서드 실행 전에 동작하는 @Before, 메서드 실행 후에 동작하는 @After, 메서드 실행 전후에 동작하는 @Around, 메서드가 정상적으로 반환된 후에 동작하는 @AfterReturning, 메서드 실행 중 예외가 발생했을 때 동작하는 @AfterThrowing 등이 있습니다.

Pointcut은 Advice가 적용될 Join Point를 정의하는 표현식입니다. 주로 메서드 이름 패턴이나 특정 어노테이션을 기반으로 설정됩니다. 예를 들어, 특정 패키지 내의 모든 메서드나 특정 어노테이션이 붙은 메서드를 대상으로 할 수 있습니다.

Spring 컨테이너가 시작될 때, @Aspect 어노테이션이 붙은 클래스를 스캔하여 빈으로 등록하고, Pointcut과 Advice 정보를 파싱하여 저장합니다. 런타임 시, Spring은 JDK Dynamic 프록시나 CGLIB을 사용하여 프록시 객체를 생성합니다. 프록시 객체는 실제 대상 객체를 감싸고, 클라이언트가 메서드를 호출할 때 이 호출을 가로챕니다.

프록시는 호출된 메서드가 Pointcut 조건에 맞는지 확인한 후, 조건에 맞으면 적절한 Advice를 실행합니다. 그런 다음 실제 대상 메서드를 호출하거나, @Around Advice의 경우 메서드 실행을 제어할 수 있습니다. 이를 통해 AOP 기능을 적용하여 트랜잭션 관리, 로깅, 보안 등을 손쉽게 구현할 수 있습니다.

결론적으로, Spring AOP는 JDK 동적 프록시와 CGLIB을 통해 런타임에 프록시 객체를 생성하여 AOP를 적용합니다. 각 방식은 사용 환경과 요구 사항에 따라 선택되며, 이를 통해 애플리케이션의 횡단 관심사를 효율적으로 관리할 수 있습니다.


JDK 동적 프록시 (JDK Dynamic Proxy):

- 인터페이스 기반의 프록시 생성 방식
- 대상 클래스가 하나 이상의 인터페이스를 구현할 때 사용
- Reflection API를 사용하여 동적으로 프록시를 생성

CGLIB (Code Generation Library):

- 클래스 기반의 프록시 생성 방식
- 인터페이스가 없는 클래스에도 적용가능
- 바이트코드 조작을 통해 프록시를 생성하므로, JDK 동적 프록시보다 성능이 뛰어남
