## 프로세스가 무엇인가요?

프로세스는 실행중인 하나의 프로그램을 의미합니다.
즉, 메모리에 올라와 실시간으로 작동하고 있는 프로그램을 의미합니다.

### 프로그램과 프로세스, 스레드의 차이에 대해 설명해 주세요.

프로세스는 실행 중인 하나의 프로그램을 의미하며 실행의 단위라고 할 수 있습니다.
반면 스레드는 프로세스 내에서 실행되는 흐름의 단위를 의미합니다. 그래서 프로세스는 독립적인 메모리 영역을 갖게 되지만,
스레드는 스택 영역에서만 독립적이며, 그 외의 영역들은 다른 스레드와 공유합니다.

### PCB가 무엇인가요?

PCB는 Process Control Block의 약자로, "프로세스 제어블록" 이라고 말하며 운영체제가 프로세스 상태관리와 문맥 교환을 위한 정보를 저장하는 구조체 입니다.  

저장되는 정보로는 고유 아이디인 PID(프로세스 ID), 프로세스가 다음으로 실행해야 하는 명령어의 주소 값인 PC, CPU의 레지스터에 저장되는 정보 등이 있습니다.
 
프로세스 생성시 커널 영역에 생성되며, 종료시 폐기됩니다. (중요한 정보를 담고 있으므로 일반 사용자로부터 접근을 막아야함)

### 그렇다면, 스레드는 PCB를 갖고 있을까요?

PCB는 갖고있지 않지만, 비슷한 개념인 TCB라는 개념이 존재합니다.
TCB는 Thread별로 존재하는 자료구조이며, PC와 Register Set(CPU 정보), 그리고 PCB를 가리키는 포인터를 가지고 있습니다.

### 리눅스에서, 프로세스와 스레드는 각각 어떻게 생성될까요?

프로세스 생성을 위해서는 fork() 함수를 호출하여 생성할 수 있습니다 

fork() 함수에는 함수를 호출한 프로세스를 복사하는 기능이 존재합니다. 

이때 기존 프로세스를 부모 프로세스, 복사된 프로세스를 자식 프로세스라고 불리우는데, fork() 함수를 호출하면 부모 프로세스는 자식 프로세스의 PID 값을, 자식 프로세스는 0을 반환합니다.

스레드는 pthread_create() 함수를 호출하여 생성할 수 있습니다.
다음과 같이 설명을 보완하여 작성할 수 있습니다:

### 자식 프로세스가 상태를 알리지 않고 죽거나, 부모 프로세스가 먼저 죽게 되면 어떻게 처리하나요?

1. 자식 프로세스가 종료되었지만 부모 프로세스가 이를 처리하지 않은 경우 : 좀비 프로세스
2. 부모 프로세스가 먼저 종료된 경우 : 고아 프로세스

#### 좀비 프로세스
- 좀비 프로세스(Zombie Process)란 자식 프로세스가 종료되었지만, 부모 프로세스가 자식의 종료 상태를 확인하지 않은 상태를 말합니다. 이때 자식 프로세스는 종료되었지만 프로세스 테이블에 여전히 남아 있는 상태로, 자원의 일부가 해제되지 않고 남아 있습니다.

- 해결 방법: 부모 프로세스가 자식 프로세스의 종료를 인지하고 `wait()` 또는 `waitpid()` 함수를 호출하여 자식 프로세스의 종료 상태를 수거하면, 좀비 프로세스가 제거됩니다. `wait()` 함수는 부모 프로세스가 자식 프로세스의 종료 상태를 읽어 들여, 자식 프로세스의 프로세스 테이블 엔트리를 해제하는 역할을 합니다. 만약 부모 프로세스가 `wait()`를 호출하지 않으면, 좀비 프로세스가 계속 남아 있게 되어 시스템 자원을 낭비할 수 있습니다.

#### 고아 프로세스
- 고아 프로세스(Orphan Process)란 부모 프로세스가 먼저 종료되고, 자식 프로세스가 아직 종료되지 않은 상태를 말합니다. 자식 프로세스는 여전히 실행 중이지만, 이제 부모 프로세스가 없기 때문에 고아 상태가 됩니다.

- 해결 방법: 리눅스에서는 고아 프로세스를 처리하기 위해, 자식 프로세스의 부모 프로세스를 `init` 프로세스(PID 1)로 재할당합니다. `init` 프로세스는 모든 고아 프로세스를 자동으로 인수하여, 자식 프로세스가 종료될 때 그 자원을 수거합니다. 이로 인해 고아 프로세스가 시스템에 영향을 미치는 일이 없게 됩니다. `init` 프로세스는 시스템에서 가장 중요한 프로세스 중 하나로, 시스템 부팅 시 가장 먼저 실행되며, 항상 실행 상태를 유지합니다.

### 리눅스에서, 데몬프로세스에 대해 설명해 주세요.

프로세스는 크게 2가지로 포그라운드 프로세스와 백그라운드 프로세스가 존재합니다. 포그라운드 프로세스는 사용자가 볼 수 있는 공간에서 실행되는 프로세스이며, 백그라운드 프로세스는 사용자가 볼 수 없는 공간에서 실행되는 프로세스 입니다. 백그라운드 프로세스에서 사용자와 상호작용이 가능한 프로세스가 있는 반면에, 사용자와 상호작용하지않아도 작업을 수행하고 있는 독립적인 프로세스를 데몬 프로세스라고 칭합니다.

### 리눅스는 프로세스가 일종의 트리를 형성하고 있습니다. 이 트리의 루트 노드에 위치하는 프로세스에 대해 설명해 주세요.

pstree라는 명령어로 확인 가능한데, 과거에는 init 프로세스가 최초 프로세스였으며, 시스템이 부팅될 때 가장 먼저 실행되는 프로세스로 모든 다른 프로세스의 부모 역할을 합니다

현재는 systemd 라는 프로세스가 최초의 프로세스 입니다. "systemd"는 부팅 과정에서 다양한 서비스와 프로세스를 관리하여 전통적인 init 프로세스의 역할을 확장한 것입니다.
