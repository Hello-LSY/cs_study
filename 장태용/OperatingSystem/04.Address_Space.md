## 프로세스 주소공간에 대해 설명해 주세요.

프로세스 주소공간이란 프로세스가 실행 될 때 운영체제에 의해 할당된 메모리 공간을 의미합니다.

각 프로세스마다 고유의 메모리영역을 갖고있고 서로 다른 프로세스가 서로 다른 메모리 영역에 접근할 수 없도록 보장합니다.

-   **코드(Code) 세그먼트**: 실행할 프로그램의 명령어가 저장된 공간입니다. 읽기 전용으로 보호되며, 일반적으로 불변입니다.
-   **데이터(Data) 세그먼트**:
    -   **정적 데이터(Static Data) 세그먼트**: 초기화된 전역 변수와 정적 변수가 저장되는 공간입니다.
    -   **BSS(Block Started by Symbol) 세그먼트**: 초기화되지 않은 전역 변수와 정적 변수가 저장됩니다. 이 공간은 런타임에 0으로 초기화됩니다.
-   **힙(Heap) 세그먼트**: 동적으로 할당되는 메모리 공간입니다. 프로그램 실행 중에 크기가 변경될 수 있으며, `malloc`이나 `new`와 같은 메모리 할당 함수로 관리됩니다.
-   **스택(Stack) 세그먼트**: 함수 호출 시 지역 변수와 함수 호출 정보를 저장하는 공간입니다. 함수가 호출될 때마다 스택에 프레임이 쌓이고, 함수가 종료되면 해당 프레임이 제거됩니다. 스택은 LIFO(Last In, First Out) 구조를 따릅니다.

## 꼬리질문

### 초기화 하지 않은 변수들은 어디에 저장될까요?

초기화 하지 않은 전역 변수와 정적 변수는 데이터 영역에 있는 BSS 세그먼트에 저장되며 런타임에 0으로 초기화 됩니다.

### 일반적인 주소공간 그림처럼, Stack과 Heap의 크기는 매우 크다고 할 수 있을까요? 그렇지 않다면, 그 크기는 언제 결정될까요?

스택은 크기가

### Stack과 Heap 공간에 대해, 접근 속도가 더 빠른 공간은 어디일까요?

기본적으로 Stack이 더 빠릅니다.

### 다음과 같이 공간을 분할하는 이유가 있을까요?

주소공간을 코드, 데이터, 스택, 힙으로 분할하는 이유는 **메모리 보호**와 **효율적인 관리**를 위해서입니다.

-   **메모리 보호**: 각 영역은 서로 독립적으로 관리되므로, 예를 들어 스택 오버플로우가 발생해도 코드나 데이터 영역에 영향을 미치지 않도록 보호할 수 있습니다.
-   **효율적인 관리**: 스택은 LIFO 구조를 통해 빠르게 함수 호출과 지역 변수를 관리할 수 있고, 힙은 동적 메모리 할당에 유연하게 대처할 수 있습니다. 이 분할을 통해 프로세스의 메모리 관리가 간단하고 효율적으로 이루어집니다.

### 스레드의 주소공간은 어떻게 구성되어 있을까요?

스레드의 주소공간은 프로세스 주소공간의 Code, Data, Heap 영역을 공유하며, 별개의 stack 영역을 갖게 됩니다.

스레드 별로 스택을 제외한 메모리 영역을 공유하므로 동기화를 해주어 데이터의 일관성을 보장할 수 있도록 해야합니다.

### "스택"영역과 "힙"영역은 정말 자료구조의 스택/힙과 연관이 있는 걸까요? 만약 그렇다면, 각 주소공간의 동작과정과 연계해서 설명해 주세요.

-   스택 영역
    -   자료구조의 스택처럼 함수 호출 시 메모리를 할당하고, 함수가 종료되면 메모리를 해제하는 방식으로 작동합니다. Last in First Out 방식으로 동작하여 실제 스택 자료구조와 비슷합니다.
-   힙 영역
    -   실제 자료구조의 힙 구조와 다릅니다. 실제로 힙 자료구조는 완전 이진 트리의 일종으로 우선순위 큐를 위해 만들어진 자료구조 입니다.
    -   힙 영역은 메모리를 동적할당 받을 때 사용하는 메모리영역입니다. 메모리 주소가 낮은 주소에서 높은 주소 방향으로 할당됩니다.

### IPC의 Shared Memory 기법은 프로세스 주소공간의 어디에 들어가나요? 그런 이유가 있을까요?

Shared Memory 일반적으로 Heap영역에 들어갑니다. 힙 영역은 동적 메모리 할당을 위한 공간이며 공유 메모리의 크기는 프로세스 간의 통신 요구 사항에 따라 달라지므로 동적으로 메모리를 할당하는 것에 적합합니다.

### 스택과 힙영역의 크기는 언제 결정되나요? 프로그램 개발자가 아닌, 사용자가 이 공간의 크기를 수정할 수 있나요?

스택 영역의 크기는 컴파일 타임에 결정됩니다. 함수 호출이 발생하면 스택 프레임이 생성되어 스택 영역이 증가하고, 함수가 종료되면 스택 프레임이 제거되어 스택 영역이 감소합니다. 스택 오버플로우는 스택 영역의 크기가 프로세스에 할당된 스택 영역의 최대 크기를 초과할 때 발생합니다.

반면에 힙 영역의 크기는 런타임에 결정됩니다. 프로그램이 동적으로 메모리를 할당하거나 해제할 때마다 힙 영역의 크기가 변화합니다. 메모리 누수는 프로그램이 할당한 메모리를 제대로 해제하지 않아 힙 영역이 점차 증가하는 현상을 의미합니다.
